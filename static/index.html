<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
          integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <title>React Redux Socket.io Chat</title>
</head>
<body>

<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '1737711359867939',
            autoLogAppEvents: true,
            xfbml: true,
            version: 'v2.9'
        });
        FB.AppEvents.logPageView();
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));


</script>

<div id="app-root"></div>
<script src="js/jquery-3.2.1.min.js"></script>
<script src="dist/bundle.js"></script>

<script>
    $(document).ready(function () {
        let token;
        let userId;

        FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
                console.log('Logged in.');
                console.log(response);
                token = response.authResponse.accessToken;
                userId = response.authResponse.userID;
            }
        });



        function lioGet() {
            FB.api(
                "/" + userId,
                function (response) {
                    if (response && !response.error) {
                        console.log('RECEIVE', response);
                        $('#info').html('<h2>Nguoi yeu ban ten la: ' + response.name + '</h2>')
                    } else {
                        console.log('send api error');
                    }
                }
            );
        }

        $('.card').click(function () {
            console.log(userId);
            $('#info').html('<h2>Loading ...</h2>');
            lioGet();
        });

        $('#login').click(function () {
            FB.login(function(response) {
                if (response.authResponse) {
                    console.log('Welcome!  Fetching your information.... ');
                    FB.api('/me', function(response) {
                        console.log('Good to see you, ' + response.name + '.');
                    });
                } else {
                    console.log('User cancelled login or did not fully authorize.');
                }
            });
        });

    });


</script>
<div id="info"></div>
<button id="login" class="btn btn-danger">LOGIN</button>
</body>
</html>



